<p id="points">Points: <span id="pointsValue"><%= points %></span></p>
<button id="clickMeButton">Click Me!</button>

<textarea id="purchasedItems" style="display: none;">
    <%= JSON.stringify(purchasedItems) %>
</textarea>

<script defer>
    let userPoints = parseInt(document.getElementById('pointsValue').textContent);

    let purchasedItems = JSON.parse(document.getElementById('purchasedItems').value);
    console.log(purchasedItems)

    // Event listener for the button
    document.getElementById('clickMeButton').addEventListener('click', async () => {
        let clickValue = 1;  // Default value for each click

        // Check if "Double Click Power" is purchased
        if (purchasedItems.includes('double-click-power')) {
            clickValue = 2;  // Double the points per click
        }
        if (purchasedItems.includes('auto-clicker')) {
            
        }

        userPoints += clickValue;  // Add points based on click value
        // console.log(userPoints);
        document.getElementById('pointsValue').textContent = userPoints;  // Update DOM

        // Update points in the database
        await fetch('/update-points', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ points: userPoints })
        });
    });

    function autoClicker (interval) {
        setTimeout (() => {
            userPoints += clickValue;
            document.getElementById('pointsValue').textContent = userPoints;
        }, interval)  
    }
</script>
